commit 00d46d25a242f9fea22e8891582ab3fd0460f0da
Author: Bernhard Rosenkr√§nzer <bero@lindev.ch>
Date:   Fri Jul 14 11:52:00 2023 +0200

    Revert "Wrap the GNU/Clang compiler-dependent flags with genex conditions"
    
    This reverts commit 9b6d4f542f32a786c0ddb4ca8ecb1f2c8fb668c1.
    That commit breaks the build.

diff --git a/cmake/QtFlagHandlingHelpers.cmake b/cmake/QtFlagHandlingHelpers.cmake
index a80dfdd020..57743067af 100644
--- a/cmake/QtFlagHandlingHelpers.cmake
+++ b/cmake/QtFlagHandlingHelpers.cmake
@@ -121,16 +121,6 @@ function(qt_internal_apply_gc_binaries target visibility)
         message(FATAL_ERROR "Visibitily setting must be one of PRIVATE, INTERFACE or PUBLIC.")
     endif()
 
-    string(JOIN "" clang_or_gcc_begin
-        "$<$<OR:"
-            "$<CXX_COMPILER_ID:GNU>,"
-            "$<CXX_COMPILER_ID:Clang>,"
-            "$<CXX_COMPILER_ID:AppleClang>,"
-            "$<CXX_COMPILER_ID:IntelLLVM>"
-        ">:"
-    )
-    set(clang_or_gcc_end ">")
-
     if ((GCC OR CLANG) AND NOT WASM AND NOT UIKIT AND NOT MSVC)
         if(APPLE)
             set(gc_sections_flag "-Wl,-dead_strip")
@@ -139,19 +129,16 @@ function(qt_internal_apply_gc_binaries target visibility)
         elseif(LINUX OR BSD OR WIN32 OR ANDROID)
             set(gc_sections_flag "-Wl,--gc-sections")
         endif()
-        set(gc_sections_flag
-            "${clang_or_gcc_begin}${gc_sections_flag}${clang_or_gcc_end}")
     endif()
     if(gc_sections_flag)
         target_link_options("${target}" ${visibility} "${gc_sections_flag}")
     endif()
 
     if((GCC OR CLANG) AND NOT WASM AND NOT UIKIT AND NOT MSVC)
-        set(split_sections_flags
-            "${clang_or_gcc_begin}-ffunction-sections;-fdata-sections${clang_or_gcc_end}")
+        set(split_sections_flags "-ffunction-sections" "-fdata-sections")
     endif()
     if(split_sections_flags)
-        target_compile_options("${target}" ${visibility} "${split_sections_flags}")
+        target_compile_options("${target}" ${visibility} ${split_sections_flags})
     endif()
 endfunction()
 
@@ -166,12 +153,7 @@ function(qt_internal_apply_intel_cet target visibility)
     endif()
 
     if(GCC)
-        string(JOIN "" flags
-            "$<$<OR:"
-                "$<CXX_COMPILER_ID:GNU>,"
-                "$<CXX_COMPILER_ID:Clang>,"
-                "$<CXX_COMPILER_ID:AppleClang>"
-            ">:-mshstk>")
+        set(flags "-mshstk")
     endif()
     if(flags)
         target_compile_options("${target}" ${visibility} "${flags}")
