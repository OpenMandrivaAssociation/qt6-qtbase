From c183113a3fe78cb567f2bd96882e8260cc9a42f7 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Nils=20Petter=20Ska=CC=8Alerud?=
 <nils.petter.skalerud@qt.io>
Date: Tue, 14 Oct 2025 11:41:52 +0200
Subject: [PATCH 395/553] iOS: Fix namespace-mangling usage in
 qiosplatformaccessibility
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

This file prevents us from compiling Qt with a custom namespace,
because these files use the Obj-C class 'QMacAccessibilityElement' with
inconsistent mangling.

This patch corrects the usage to be consistent.

Change-Id: Ic15b2b9294a301b1cdc934ecf5e666d3ec1a426f
Reviewed-by: Tor Arne Vestb√∏ <tor.arne.vestbo@qt.io>
(cherry picked from commit ef61fec0dcb5f38756f7eb2726eed8d8b6db4d72)
Reviewed-by: Qt Cherry-pick Bot <cherrypick_bot@qt-project.org>
---
 src/plugins/platforms/ios/qiosplatformaccessibility.h  | 2 +-
 src/plugins/platforms/ios/qiosplatformaccessibility.mm | 2 ++
 2 files changed, 3 insertions(+), 1 deletion(-)

diff --git a/src/plugins/platforms/ios/qiosplatformaccessibility.h b/src/plugins/platforms/ios/qiosplatformaccessibility.h
index 49cecbfec1f..75fd2de581d 100644
--- a/src/plugins/platforms/ios/qiosplatformaccessibility.h
+++ b/src/plugins/platforms/ios/qiosplatformaccessibility.h
@@ -22,7 +22,7 @@ public:
 
 private:
     QMacNotificationObserver m_focusObserver;
-    QMacAccessibilityElement *m_focusElement;
+    QT_MANGLE_NAMESPACE(QMacAccessibilityElement) *m_focusElement;
 };
 
 QT_END_NAMESPACE
diff --git a/src/plugins/platforms/ios/qiosplatformaccessibility.mm b/src/plugins/platforms/ios/qiosplatformaccessibility.mm
index 6869db5ae81..96f59bc69f6 100644
--- a/src/plugins/platforms/ios/qiosplatformaccessibility.mm
+++ b/src/plugins/platforms/ios/qiosplatformaccessibility.mm
@@ -11,6 +11,8 @@
 #include "qioswindow.h"
 #include "quiaccessibilityelement.h"
 
+QT_NAMESPACE_ALIAS_OBJC_CLASS(QMacAccessibilityElement);
+
 QIOSPlatformAccessibility::QIOSPlatformAccessibility()
 {
     m_focusObserver = QMacNotificationObserver(
-- 
2.51.2

