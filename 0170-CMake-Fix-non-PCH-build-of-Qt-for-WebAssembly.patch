From 16cf1131cb13fe65c8a941cc4b09799258be4add Mon Sep 17 00:00:00 2001
From: Alexandru Croitor <alexandru.croitor@qt.io>
Date: Fri, 19 Sep 2025 15:37:39 +0200
Subject: [PATCH 170/553] CMake: Fix non-PCH build of Qt for WebAssembly

Pick-to: 6.9 6.8
Change-Id: Iaeaabd2221a5b85ccf676307fc456d5be758399c
Reviewed-by: Joerg Bornemann <joerg.bornemann@qt.io>
(cherry picked from commit 2b19a22a4ff2d7a00222ea63b2b84cfdbb202003)
Reviewed-by: Qt Cherry-pick Bot <cherrypick_bot@qt-project.org>
---
 src/corelib/platform/wasm/qwasmglobal.cpp | 1 +
 src/corelib/platform/wasm/qwasmsocket.cpp | 2 ++
 2 files changed, 3 insertions(+)

diff --git a/src/corelib/platform/wasm/qwasmglobal.cpp b/src/corelib/platform/wasm/qwasmglobal.cpp
index f80db160f08..5ac4bd51c8d 100644
--- a/src/corelib/platform/wasm/qwasmglobal.cpp
+++ b/src/corelib/platform/wasm/qwasmglobal.cpp
@@ -1,6 +1,7 @@
 // Copyright (C) 2024 The Qt Company Ltd.
 // SPDX-License-Identifier: LicenseRef-Qt-Commercial OR LGPL-3.0-only OR GPL-2.0-only OR GPL-3.0-only
 
+#include <QtCore/qglobalstatic.h>
 #include "qwasmglobal_p.h"
 
 namespace qwasmglobal {
diff --git a/src/corelib/platform/wasm/qwasmsocket.cpp b/src/corelib/platform/wasm/qwasmsocket.cpp
index 64af09e9871..483650ce2de 100644
--- a/src/corelib/platform/wasm/qwasmsocket.cpp
+++ b/src/corelib/platform/wasm/qwasmsocket.cpp
@@ -3,6 +3,8 @@
 
 #include "qwasmsocket_p.h"
 #include "qwasmglobal_p.h"
+
+#include <QtCore/qcoreapplication.h>
 #include <QtCore/qsocketnotifier.h>
 
 #include "emscripten.h"
-- 
2.51.2

