From 41c6bb65b4737acf3a96a7ea06205b97fe43a5b5 Mon Sep 17 00:00:00 2001
From: Assam Boudjelthia <assam.boudjelthia@qt.io>
Date: Mon, 1 Sep 2025 04:01:02 +0300
Subject: [PATCH 028/553] Android: add color to test widgets to visualize
 window states better
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Change-Id: Id6f50004c764910cf3d9263a73e48ecfe0fb0842
Reviewed-by: Tor Arne Vestb√∏ <tor.arne.vestbo@qt.io>
(cherry picked from commit fbe13a4bc19c9c5e362c7ef6529801e8edeb4e21)
Reviewed-by: Qt Cherry-pick Bot <cherrypick_bot@qt-project.org>
---
 tests/auto/corelib/platform/android/tst_android.cpp | 8 ++++++++
 1 file changed, 8 insertions(+)

diff --git a/tests/auto/corelib/platform/android/tst_android.cpp b/tests/auto/corelib/platform/android/tst_android.cpp
index 2fc562d4194..6db642148d9 100644
--- a/tests/auto/corelib/platform/android/tst_android.cpp
+++ b/tests/auto/corelib/platform/android/tst_android.cpp
@@ -349,6 +349,10 @@ void tst_Android::testFullScreenDimensions()
     display.callMethod<void>("getRealSize", realSize);
 
     QWidget widget;
+    QPalette palette = widget.palette();
+    palette.setColor(QPalette::Window, Qt::red);
+    widget.setAutoFillBackground(true);
+    widget.setPalette(palette);
     QPlatformScreen *screen = QGuiApplication::primaryScreen()->handle();
     {
         // Normal -
@@ -442,6 +446,10 @@ void tst_Android::orientationChange()
         QSKIP("Android 9 orientation changes callbacks are buggy (QTBUG-124890).");
 
     QWidget widget;
+    QPalette palette = widget.palette();
+    palette.setColor(QPalette::Window, Qt::red);
+    widget.setAutoFillBackground(true);
+    widget.setPalette(palette);
     widget.show();
 
     QScreen *screen = QGuiApplication::primaryScreen();
-- 
2.51.2

