From ea50e072a0d11b1bfa762a9b682d14b0e6f7e836 Mon Sep 17 00:00:00 2001
From: Doris Verria <doris.verria@qt.io>
Date: Wed, 2 Jul 2025 21:52:47 +0200
Subject: [PATCH 010/553] qiostheme: Set more palette color roles
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

The iOS platform theme sets up many color roles from the semantic
UIColor-s. Set up more such roles like disabled text, etc.
With this change, the QQC iOS style can make use of the platform theme
palette directly.

Pick-to: 6.9 6.8
Change-Id: Ia1ecc7c907d711a62f5fb6fb6269427d9374b2c6
Reviewed-by: Richard Moe Gustavsen <richard.gustavsen@qt.io>
Reviewed-by: Tor Arne Vestb√∏ <tor.arne.vestbo@qt.io>
(cherry picked from commit a7f3558dd64666666a7247f2388b357f3a98a48c)
Reviewed-by: Qt Cherry-pick Bot <cherrypick_bot@qt-project.org>
---
 src/plugins/platforms/ios/qiostheme.mm | 8 ++++++++
 1 file changed, 8 insertions(+)

diff --git a/src/plugins/platforms/ios/qiostheme.mm b/src/plugins/platforms/ios/qiostheme.mm
index afee9824d6d..d586d7e276f 100644
--- a/src/plugins/platforms/ios/qiostheme.mm
+++ b/src/plugins/platforms/ios/qiostheme.mm
@@ -57,14 +57,19 @@ void QIOSTheme::initializeSystemPalette()
     Q_DECL_IMPORT QPalette qt_fusionPalette(void);
     s_systemPalette = qt_fusionPalette();
 
+    const auto disabledText = qt_mac_toQBrush(UIColor.tertiaryLabelColor.CGColor);
+
     s_systemPalette.setBrush(QPalette::Window, qt_mac_toQBrush(UIColor.systemGroupedBackgroundColor.CGColor));
     s_systemPalette.setBrush(QPalette::Active, QPalette::WindowText, qt_mac_toQBrush(UIColor.labelColor.CGColor));
+    s_systemPalette.setBrush(QPalette::Disabled, QPalette::WindowText, disabledText);
 
     s_systemPalette.setBrush(QPalette::Base, qt_mac_toQBrush(UIColor.secondarySystemGroupedBackgroundColor.CGColor));
     s_systemPalette.setBrush(QPalette::Active, QPalette::Text, qt_mac_toQBrush(UIColor.labelColor.CGColor));
+    s_systemPalette.setBrush(QPalette::Disabled, QPalette::Text, disabledText);
 
     s_systemPalette.setBrush(QPalette::Button, qt_mac_toQBrush(UIColor.secondarySystemBackgroundColor.CGColor));
     s_systemPalette.setBrush(QPalette::Active, QPalette::ButtonText, qt_mac_toQBrush(UIColor.labelColor.CGColor));
+    s_systemPalette.setBrush(QPalette::Disabled, QPalette::ButtonText, disabledText);
 
     s_systemPalette.setBrush(QPalette::Active, QPalette::BrightText, qt_mac_toQBrush(UIColor.lightTextColor.CGColor));
     s_systemPalette.setBrush(QPalette::Active, QPalette::PlaceholderText, qt_mac_toQBrush(UIColor.placeholderTextColor.CGColor));
@@ -75,6 +80,9 @@ void QIOSTheme::initializeSystemPalette()
     s_systemPalette.setBrush(QPalette::Highlight, QColor(11, 70, 150, 60));
     s_systemPalette.setBrush(QPalette::HighlightedText, qt_mac_toQBrush(UIColor.labelColor.CGColor));
 
+    s_systemPalette.setBrush(QPalette::ToolTipText, qt_mac_toQBrush(UIColor.labelColor.CGColor));
+    s_systemPalette.setBrush(QPalette::Disabled, QPalette::ToolTipText, disabledText);
+
     if (@available(ios 15.0, *))
         s_systemPalette.setBrush(QPalette::Accent, qt_mac_toQBrush(UIColor.tintColor.CGColor));
 }
-- 
2.51.2

