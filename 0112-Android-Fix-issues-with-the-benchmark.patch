From 42b87fdfabacd77b0a9ff260326d7fc649196876 Mon Sep 17 00:00:00 2001
From: Markku Nokkala <markku.nokkala@qt.io>
Date: Tue, 16 Sep 2025 14:48:02 +0300
Subject: [PATCH 112/553] Android: Fix issues with the benchmark

Fix issues with the benchmark which made it impossible to build
the benchmark properly.

Pick-to: 6.9
Change-Id: Idcde2104d7817f67cb1bd2bd3755eaf2e6b3b2c9
Reviewed-by: Assam Boudjelthia <assam.boudjelthia@qt.io>
(cherry picked from commit efd6cea746e5493c1d8c83a91847c9a02d651479)
Reviewed-by: Qt Cherry-pick Bot <cherrypick_bot@qt-project.org>
---
 .../benchmarks/corelib/platform/androiditemmodel/CMakeLists.txt | 2 +-
 .../platform/androiditemmodel/tst_bench_androiditemmodel.cpp    | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/tests/benchmarks/corelib/platform/androiditemmodel/CMakeLists.txt b/tests/benchmarks/corelib/platform/androiditemmodel/CMakeLists.txt
index b72d0564c1a..1fd4154d0f7 100644
--- a/tests/benchmarks/corelib/platform/androiditemmodel/CMakeLists.txt
+++ b/tests/benchmarks/corelib/platform/androiditemmodel/CMakeLists.txt
@@ -11,7 +11,7 @@ if(NOT QT_BUILD_STANDALONE_TESTS AND NOT QT_BUILDING_QT)
     find_package(Qt6BuildInternals REQUIRED COMPONENTS STANDALONE_TEST)
 endif()
 
-qt_internal_add_test(tst_bench_androiditemmodel
+qt_internal_add_test(tst_androiditemmodel
     SOURCES
         tst_bench_androiditemmodel.cpp
     LIBRARIES
diff --git a/tests/benchmarks/corelib/platform/androiditemmodel/tst_bench_androiditemmodel.cpp b/tests/benchmarks/corelib/platform/androiditemmodel/tst_bench_androiditemmodel.cpp
index c7079e147a7..6a2c459914f 100644
--- a/tests/benchmarks/corelib/platform/androiditemmodel/tst_bench_androiditemmodel.cpp
+++ b/tests/benchmarks/corelib/platform/androiditemmodel/tst_bench_androiditemmodel.cpp
@@ -84,7 +84,7 @@ void tst_BenchAndroidItemModel::init()
 {
     m_jModel = QJniObject::construct<QtJniTypes::BenchQtAbstractItemModel>();
     QVERIFY(m_jModel.isValid());
-    qProxy = std::unique_ptr<QAbstractItemModel>(QAndroidItemModelProxy::createNativeProxy(jModel));
+    qProxy = std::unique_ptr<QAbstractItemModel>(QAndroidItemModelProxy::createNativeProxy(m_jModel));
     nativeModel = std::make_unique<BenchNativeAbstractItemModel>();
     QVERIFY(qProxy);
 }
-- 
2.51.2

