From 956855a117ef7361d3ef2ea64451667eb128a495 Mon Sep 17 00:00:00 2001
From: Marc Mutz <marc.mutz@qt.io>
Date: Mon, 27 Oct 2025 12:01:54 +0100
Subject: [PATCH 553/553] QFontPrivate: properly delete the assignment operator
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Before, it was implemented as a private no-op(!). This looks overly
dangerous. The typical pattern in C++98 was to declare it private,
but _not_ implement it, so one would get a linker error at least.
This, OTOH, will just compile and fail to work.

Picking to all active branches to ensure it's not inadvertently used.

Pick-to: 6.8 6.5
Change-Id: I6c2223a605665f1f0bade488fe9794d62ee335c6
Reviewed-by: Thiago Macieira <thiago.macieira@intel.com>
Reviewed-by: Ivan Solovev <ivan.solovev@qt.io>
Reviewed-by: MÃ¥rten Nordheim <marten.nordheim@qt.io>
(cherry picked from commit 139b4181ed6e308a6070f173803302b29b6ab1e7)
Reviewed-by: Qt Cherry-pick Bot <cherrypick_bot@qt-project.org>
---
 src/gui/text/qfont_p.h | 4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

diff --git a/src/gui/text/qfont_p.h b/src/gui/text/qfont_p.h
index d1509e4a251..75550439521 100644
--- a/src/gui/text/qfont_p.h
+++ b/src/gui/text/qfont_p.h
@@ -166,6 +166,7 @@ public:
 
     QFontPrivate();
     QFontPrivate(const QFontPrivate &other);
+    QFontPrivate &operator=(const QFontPrivate &) = delete;
     ~QFontPrivate();
 
     QFontEngine *engineForScript(int script) const;
@@ -206,9 +207,6 @@ public:
     void setVariableAxis(QFont::Tag tag, float value);
     void unsetVariableAxis(QFont::Tag tag);
     bool hasVariableAxis(QFont::Tag tag, float value) const;
-
-private:
-    QFontPrivate &operator=(const QFontPrivate &) { return *this; }
 };
 
 
-- 
2.51.2

