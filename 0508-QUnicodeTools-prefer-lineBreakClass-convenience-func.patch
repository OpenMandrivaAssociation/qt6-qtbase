From db156b4145698c056f0ee7ab703a8466f5c6e7a6 Mon Sep 17 00:00:00 2001
From: Marc Mutz <marc.mutz@qt.io>
Date: Fri, 24 Oct 2025 11:54:43 +0200
Subject: [PATCH 508/553] QUnicodeTools: prefer lineBreakClass() convenience
 function
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

... where applicable

Simplifies the code.

In some cases, the code queries more than one property of the
character, in which case we keep using qGetProp().

Amends 85899ff181984a1310cd1ad10cdb0824f1ca5118 and
1f73d4b87c153224b4eeee164269d0b313a11a8b.

Pick-to: 6.8 6.5
Change-Id: I27cc0e5607b1e730f649c9d73f05f6b1227bdd17
Reviewed-by: MÃ¥rten Nordheim <marten.nordheim@qt.io>
(cherry picked from commit 13f521e4983c7f3b4a77a4c521da1cfda992dad8)
Reviewed-by: Qt Cherry-pick Bot <cherrypick_bot@qt-project.org>
---
 src/corelib/text/qunicodetools.cpp | 6 ++----
 1 file changed, 2 insertions(+), 4 deletions(-)

diff --git a/src/corelib/text/qunicodetools.cpp b/src/corelib/text/qunicodetools.cpp
index 51e63d3ec39..c0cb43a0685 100644
--- a/src/corelib/text/qunicodetools.cpp
+++ b/src/corelib/text/qunicodetools.cpp
@@ -781,8 +781,7 @@ static void getLineBreaks(const char16_t *string, qsizetype len, QCharAttributes
                         if (QChar::isLowSurrogate(low))
                             c = QChar::surrogateToUcs4(c, low);
                     }
-                    nncls = QUnicodeTables::LineBreakClass(
-                            QUnicodeTables::properties(c)->lineBreakClass);
+                    nncls = QUnicodeTables::lineBreakClass(c);
                 }
 
                 constexpr QUnicodeTables::LineBreakClass lb15b[] = {
@@ -879,8 +878,7 @@ static void getLineBreaks(const char16_t *string, qsizetype len, QCharAttributes
                         if (QChar::isLowSurrogate(low))
                             ch = QChar::surrogateToUcs4(ch, low);
                     }
-                    if (QUnicodeTables::properties(ch)->lineBreakClass
-                        == QUnicodeTables::LineBreak_NU) {
+                    if (QUnicodeTables::lineBreakClass(ch) == QUnicodeTables::LineBreak_NU) {
                         attributes[pos].lineBreak = true;
                         goto next;
                     }
-- 
2.51.2

